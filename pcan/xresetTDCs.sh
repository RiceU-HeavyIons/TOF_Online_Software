#!/bin/sh
# $Id$

if [ "x$1" = "x" ]; then
    echo $"Usage: $0 <TCPU CANid (hex without 0x)> <devID> (dec)"
  exit 1
fi

if [ "x$2" = "x" ]; then
  echo $"Usage: $0 <TCPU CANid> <devID>"
  exit 1
fi

# reset all TDCs all TDIGs with broadcast
./pc "m e 0x1fc800"$1" 6 0x4 0xe4 0xff 0xff 0xff 0xff $2"
sleep 1
./pc "m e 0x1fc800"$1" 6 0x4 0xe4 0xff 0xff 0xff 0x3f $2"
sleep 1
./pc "m e 0x1fc800"$1" 6 0x4 0xe4 0xff 0xff 0xff 0x9f $2"
sleep 1
./pc "m e 0x1fc800"$1" 6 0x4 0xf4 0xff 0xff 0xff 0x1f $2"
sleep 1
./pc "m e 0x1fc800"$1" 6 0x4 0xe4 0xff 0xff 0xff 0x9f $2"

exit


############################################################
#### this below was without broadcast. NOT USED ############
############################################################

# reset all TDCs TDIG 0
./pc "m e 0x40800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0xff 255"
sleep 1
./pc "m e 0x40800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x3f 255"
sleep 1
./pc "m e 0x40800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1
./pc "m e 0x40800"$tr" 6 0x4 0xf4 0xff 0xff 0xff 0x1f 255"
sleep 1
./pc "m e 0x40800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1

# reset all TDCs TDIG 1
./pc "m e 0x44800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0xff 255"
sleep 1
./pc "m e 0x44800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x3f 255"
sleep 1
./pc "m e 0x44800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1
./pc "m e 0x44800"$tr" 6 0x4 0xf4 0xff 0xff 0xff 0x1f 255"
sleep 1
./pc "m e 0x44800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1

# reset all TDCs TDIG 2
./pc "m e 0x48800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0xff 255"
sleep 1
./pc "m e 0x48800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x3f 255"
sleep 1
./pc "m e 0x48800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1
./pc "m e 0x48800"$tr" 6 0x4 0xf4 0xff 0xff 0xff 0x1f 255"
sleep 1
./pc "m e 0x48800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1

# reset all TDCs TDIG 3
./pc "m e 0x4c800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0xff 255"
sleep 1
./pc "m e 0x4c800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x3f 255"
sleep 1
./pc "m e 0x4c800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1
./pc "m e 0x4c800"$tr" 6 0x4 0xf4 0xff 0xff 0xff 0x1f 255"
sleep 1
./pc "m e 0x4c800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1

# reset all TDCs TDIG 4
./pc "m e 0x50800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0xff 255"
sleep 1
./pc "m e 0x50800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x3f 255"
sleep 1
./pc "m e 0x50800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1
./pc "m e 0x50800"$tr" 6 0x4 0xf4 0xff 0xff 0xff 0x1f 255"
sleep 1
./pc "m e 0x50800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1

# reset all TDCs TDIG 5
./pc "m e 0x54800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0xff 255"
sleep 1
./pc "m e 0x54800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x3f 255"
sleep 1
./pc "m e 0x54800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1
./pc "m e 0x54800"$tr" 6 0x4 0xf4 0xff 0xff 0xff 0x1f 255"
sleep 1
./pc "m e 0x54800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1

# reset all TDCs TDIG 6
./pc "m e 0x58800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0xff 255"
sleep 1
./pc "m e 0x58800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x3f 255"
sleep 1
./pc "m e 0x58800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1
./pc "m e 0x58800"$tr" 6 0x4 0xf4 0xff 0xff 0xff 0x1f 255"
sleep 1
./pc "m e 0x58800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1

# reset all TDCs TDIG 7
./pc "m e 0x5c800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0xff 255"
sleep 1
./pc "m e 0x5c800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x3f 255"
sleep 1
./pc "m e 0x5c800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"
sleep 1
./pc "m e 0x5c800"$tr" 6 0x4 0xf4 0xff 0xff 0xff 0x1f 255"
sleep 1
./pc "m e 0x5c800"$tr" 6 0x4 0xe4 0xff 0xff 0xff 0x9f 255"

exit

